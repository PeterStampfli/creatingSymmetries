<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8"/>
<head>
	<title>ornament</title>
</head>
<body>
	<noscript>
		<h1 style="background-color:white">
			Please allow execution of javascript !
			<br>
			(Else nothing happens.)
		</h1>
	</noscript>
	<h4>
		To "download" this image 
		<a id="downloadImageButton" href="">&nbsp click here ! &nbsp</a>
	</h4>
	<p>
		To download the code of this page click:
		<a download href="ornament.html">&nbsp here &nbsp</a>.
	</p>
	<p>
		<canvas id="outputCanvas" moz-opaque></canvas>
	</p>

</body>
<script>
var canvas;
var canvasImage;

window.onload = function () {
	setupImageDownload();
    canvas = document.getElementById("outputCanvas");
    canvasImage = canvas.getContext("2d");
    canvas.height=size;
    canvas.width=size;
    canvasImage.fillStyle=backgroundColor;
    canvasImage.fillRect(0,0,size,size);
    canvasImage.lineJoin="round";
    canvasImage.lineCap="round";
    canvasImage.lineWidth=lineWidth;
	drawing();

};

function setupImageDownload(){
    var downloadImageButton = document.getElementById('downloadImageButton');
    //  for image downloading, using jpeg image format, default quality=0.92
    downloadImageButton.addEventListener('click', function () {
            //  use correct data format and filename
            downloadImageButton.href = outputCanvas.toDataURL("image/jpeg"); // the data URL is made at the time of the click
            downloadImageButton.download = "theImage.jpg";
        }, false);
}

function drawing(){
	var tpi=2*Math.PI;
	var t=0;
	var dt=tpi/nSteps;
	var scale=scaleFactor*size/2;
	canvasImage.beginPath();
	canvasImage.moveTo(scale*x(0)+size/2,scale*y(0)+size/2);
	while (t<=tpi){
		t+=dt;
		canvasImage.lineTo(scale*x(t)+size/2,scale*y(t)+size/2);
	}
	canvasImage.stroke();
}


var nSteps=1000;
var size=512;
var backgroundColor="rgb(200,200,150)";
var lineWidth=3;
var lineColor="rgb(0,0,150)";
var scaleFactor=0.5;


function x(t){
	return 0.6*Math.cos(t)-0.3*Math.cos(6*t)-0.1*Math.cos(11*t)+Math.cos(-4*t);
}

function y(t){
	return 0.6*Math.sin(t)-0.3*Math.sin(6*t)-0.1*Math.sin(11*t)+Math.sin(-4*t);
}
</script>
</html>
