<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8"/>
<head>
	<title>fastExp</title>
</head>
<body>
	<p> 
		Activate javascript and check the console !
	</p>
	<p> 
		With a decent browser you can save this page on your own computer. Edit it and make your own experiments.
	</p>
</body>
<script src="fastFunctions.js"></script>

<script>
"use strict";

// the exponential function
//=================================================

setupExpTables(1000);

console.log("simple approximation");
absErrorCheck(0,4,1.0/60000,Math.exp,fastExp);

console.log("linear interpolation");
absErrorCheck(0,4,1.0/60000,Math.exp,fastInterpolatedExp);

console.log("improved linear interpolation");
absErrorCheck(0,4,1.0/60000,Math.exp,fastImprovedInterpolatedExp);

// checking the speed
//===================================================0

var nChecks=10000000;

var x=0;
var y=0;
var range=63;
var dx=range/nChecks;
var start=0;
x=0;
start=time();

while(x<range){
	y+=Math.exp(x);
	x+=dx;
}
console.log("using the Math.exp function: "+(time()-start)/1000);

x=0;
start=time();
while(x<range){
	y+=fastImprovedInterpolatedExp(x);
	x+=dx;
}
console.log("using the 'quadratic' interpolated sin function: "+(time()-start)/1000);

x=0;
start=time();
while(x<range){
	y+=fastInterpolatedExp(x);
	x+=dx;
}
console.log("using the fast interpolated exp function: "+(time()-start)/1000);

x=0;
start=time();
while(x<range){
	y=+fastExp(x);

	x+=dx;
}
console.log("using the fast exp function: "+(time()-start)/1000);

//  for reference - the empty loop
x=0;
start=time();
while(x<range){
	x+=dx;
}
console.log("the empty loop: "+(time()-start)/1000);

x=emptyTiming(0,range,nChecks);
console.log("simple fast exp");
x+=timing(0,range,nChecks,fastExp);
console.log("linear interpolation fast exp");
x+=timing(0,range,nChecks,fastInterpolatedExp);
console.log("improved quadratic interpolation fast exp");
x+=timing(0,range,nChecks,fastImprovedInterpolatedExp);
console.log("Math.exp");
x+=timing(0,range,nChecks,Math.exp);
console.log(x);
</script>
</html>